<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Royal Spice Biriyani House</title>

<!-- jsPDF for Invoice -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
/* =======================================
   CSS Section (UNCHANGED FROM YOUR CODE)
======================================= */

body {
    margin: 0;
    font-family: Arial, sans-serif;
    background-color: #fff7e6;
    color: #4a2c2a;
    overflow-x: hidden;
}

header {
    background: #b33c00;
    padding: 20px;
    text-align: center;
    color: white;
    font-size: 28px;
    font-weight: bold;
}

nav {
    background: #ffb84d;
    padding: 12px;
    text-align: center;
}
nav a {
    margin: 0 15px;
    color: #4a2c2a;
    text-decoration: none;
    font-size: 18px;
    font-weight: bold;
    transition: all 0.3s ease;
}
nav a:hover {
    color: #fff;
    text-shadow: 2px 2px 5px #cc3300;
    transform: scale(1.1);
}

.hero {
    background: url('https://images.unsplash.com/photo-1608138273246-3c4d475a726a') center/cover no-repeat;
    height: 350px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 36px;
    font-weight: bold;
    text-align: center;
    padding: 20px;
    color: orange;
    text-shadow: 0 0 15px orange;
}

#menu {
    background: url('https://images.unsplash.com/photo-1543353071-087092ec393a') center/cover no-repeat;
    padding: 40px;
    position: relative;
    color: white;
}
#menu::before {
    content: "";
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, 0.55);
}
#menu > * { position: relative; z-index: 2; }

.menu-item {
    background: rgba(255, 224, 179, 0.85);
    padding: 15px;
    margin: 10px 0;
    border-radius: 8px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    color: #4a2c2a;
}

.menu-item button {
    background: #cc3300;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 5px;
    cursor: pointer;
}

#cart-section {
    background: #fff0d6;
    padding: 40px;
}

.cart-item {
    display: flex;
    justify-content: space-between;
    margin: 8px 0;
}

.order-btn {
    background: #cc3300;
    padding: 15px 30px;
    color: white;
    font-size: 20px;
    border-radius: 8px;
    cursor: pointer;
}

footer {
    background: #b33c00;
    color: white;
    text-align: center;
    padding: 20px;
    margin-top: 40px;
}

/* POPUPS */
#order-popup, #payment-popup {
    display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: white;
    border-radius: 15px;
    padding: 30px;
    box-shadow: 0 0 20px rgba(0,0,0,0.5);
    z-index: 100;
    width: 90%;
    max-width: 450px;
    text-align: center;
}

#payment-popup input {
    width: 90%;
    padding: 8px;
    margin: 5px 0;
}

.green-tick {
    font-size: 50px;
    color: green;
}

#whatsapp-btn {
    background: #25d366;
    color: white;
    padding: 10px 15px;
    border-radius: 5px;
    text-decoration: none;
}

#confetti-container {
    position: fixed;
    inset: 0;
    pointer-events: none;
}
</style>
</head>

<body>

<header>Royal Spice Biriyani House</header>

<nav>
    <a href="#home">Home</a>
    <a href="#menu">Menu</a>
    <a href="#cart-section">Cart</a>
    <a href="#contact">Contact</a>
</nav>

<div class="hero" id="home">‚ÄúTaste the Authentic Royal Biriyani‚Äù</div>

<section id="menu">
    <h2>üçΩ Order Menu</h2>
    <div class="menu-item"><span>Chicken Biriyani - ‚Çπ180</span><button onclick="playClick(); addToCart('Chicken Biriyani', 180)">Add</button></div>
    <div class="menu-item"><span>Mutton Biriyani - ‚Çπ250</span><button onclick="playClick(); addToCart('Mutton Biriyani', 250)">Add</button></div>
    <div class="menu-item"><span>Veg Biriyani - ‚Çπ140</span><button onclick="playClick(); addToCart('Veg Biriyani', 140)">Add</button></div>
    <div class="menu-item"><span>Egg Biriyani - ‚Çπ130</span><button onclick="playClick(); addToCart('Egg Biriyani', 130)">Add</button></div>
    <div class="menu-item"><span>Chicken 65 - ‚Çπ160</span><button onclick="playClick(); addToCart('Chicken 65', 160)">Add</button></div>
    <div class="menu-item"><span>Butter Chicken - ‚Çπ200</span><button onclick="playClick(); addToCart('Butter Chicken', 200)">Add</button></div>
</section>

<section id="cart-section">
    <h2>üõí Your Cart</h2>
    <div id="cart"></div>
    <h3>Total: ‚Çπ<span id="total">0</span></h3>
    <button class="order-btn" onclick="playClick(); showPaymentPopup()">Pay & Place Order</button>
</section>

<section id="contact">
    <h2>Contact Us</h2>
    <p><strong>Address:</strong> Royal Spice Biriyani House, Main Street, Trichy</p>
    <p><strong>Phone:</strong> +91 98765 43210</p>
    <p><strong>Working Hours:</strong> 10 AM ‚Äì 2 PM</p>
</section>

<footer>¬© 2025 Royal Spice Biriyani House - All Rights Reserved.</footer>

<!-- PAYMENT POPUP -->
<div id="payment-popup">
    <h2>Select Payment Method</h2>
    <p>Total: ‚Çπ<span id="payment-total">0</span></p>

    <h3>üí≥ Card Payment</h3>
    <input type="text" id="card-number" placeholder="Card Number" maxlength="16">
    <input type="text" id="expiry" placeholder="MM/YY" maxlength="5">
    <input type="text" id="cvv" placeholder="CVV" maxlength="3">
    <button onclick="playClick(); processCardPayment()">Pay by Card</button>

    <hr>

    <h3>üì± UPI Payment</h3>
    <input type="text" id="upi-id" placeholder="example@upi">
    <button onclick="playClick(); processUPI()">Generate UPI QR</button>

    <div id="upi-qr-section" style="display:none; margin-top:15px;">
        <p><strong>Scan & Pay</strong></p>
        <img id="upi-qr" width="200">
        <br><br>
        <button onclick="playClick(); confirmUPIQR()">Payment Done</button>
    </div>

    <hr>

    <h3>üíµ Cash on Delivery</h3>
    <button onclick="playClick(); processCOD()">Place Order (COD)</button>

    <br><br>
    <button onclick="playClick(); closePaymentPopup()">Cancel</button>
</div>

<!-- ORDER POPUP -->
<div id="order-popup">
    <div class="green-tick">‚úîÔ∏è</div>
    <h2>Your Order Has Been Placed!</h2>
    <div id="popup-items"></div>
    <p>Order ID: <span id="order-id"></span></p>
    <p><strong>Order Status:</strong> <span id="order-status">Placed</span></p>
    <a id="whatsapp-btn" href="#" target="_blank">üì≤ Track Order on WhatsApp</a>
    <br><br>
    <button onclick="playClick(); downloadInvoice()">üßæ Download Invoice</button>
    <br><br>
    <button onclick="playClick(); closePopup()">OK</button>
</div>

<div id="confetti-container"></div>

<script>
/* =======================================
   JavaScript Section (OLD + ADDED)
======================================= */

function playClick(){ document.getElementById('click-sound').play(); }
function playSuccess(){ document.getElementById('success-sound').play(); }

let cart = {};

function addToCart(itemName, price){
    if(!cart[itemName]) cart[itemName]={quantity:1, price:price};
    else cart[itemName].quantity++;
    updateCart();
}

function updateCart(){
    let cartDiv=document.getElementById("cart");
    let totalDiv=document.getElementById("total");
    cartDiv.innerHTML="";
    let total=0;
    for(let item in cart){
        let entry=cart[item];
        total+=entry.price*entry.quantity;
        cartDiv.innerHTML+=`
        <div class="cart-item">
            <span>${item} √ó ${entry.quantity}</span>
            <span>‚Çπ${entry.price*entry.quantity}</span>
        </div>`;
    }
    totalDiv.innerText=total;
    document.getElementById("payment-total").innerText=total;
}

function showPaymentPopup(){
    if(Object.keys(cart).length===0){ alert("Cart is empty!"); return; }
    document.getElementById("payment-popup").style.display="block";
}
function closePaymentPopup(){
    document.getElementById("payment-popup").style.display="none";
}

/* CARD PAYMENT */
function processCardPayment(){
    let card=document.getElementById("card-number").value.trim();
    let exp=document.getElementById("expiry").value.trim();
    let cvv=document.getElementById("cvv").value.trim();
    if(card.length!==16 || exp.length!==5 || cvv.length!==3){
        alert("Invalid card details!");
        return;
    }
    closePaymentPopup();
    setTimeout(()=>{ placeOrder(); },1000);
}

/* UPI PAYMENT WITH QR */
function processUPI(){
    let upi=document.getElementById("upi-id").value.trim();
    if(!upi || !upi.includes("@")){
        alert("Invalid UPI ID!");
        return;
    }
    let amount=document.getElementById("payment-total").innerText;
    let upiURL=`upi://pay?pa=${upi}&pn=Royal Spice Biriyani House&am=${amount}&cu=INR`;
    let qrURL=`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(upiURL)}`;
    document.getElementById("upi-qr").src=qrURL;
    document.getElementById("upi-qr-section").style.display="block";
}

function confirmUPIQR(){
    closePaymentPopup();
    setTimeout(()=>{ placeOrder(); },1000);
}

/* CASH ON DELIVERY */
function processCOD(){
    closePaymentPopup();
    setTimeout(()=>{ placeOrder(); },500);
}

/* ORDER */
function placeOrder(){
    playSuccess();
    let orderId='RSB'+Math.floor(Math.random()*1000000);
    document.getElementById("order-id").innerText=orderId;
    let popupItems=document.getElementById("popup-items");
    popupItems.innerHTML="";
    for(let item in cart){
        popupItems.innerHTML+=`<p>${item} √ó ${cart[item].quantity}</p>`;
    }
    document.getElementById("order-popup").style.display="block";
    startOrderStatus();
}

/* ORDER STATUS */
function startOrderStatus(){
    const status=document.getElementById("order-status");
    status.innerText="Placed";
    setTimeout(()=>{ status.innerText="Preparing"; },3000);
    setTimeout(()=>{ status.innerText="Ready"; },6000);
    setTimeout(()=>{ status.innerText="Delivered"; },9000);
}

function closePopup(){
    document.getElementById("order-popup").style.display="none";
    cart={};
    updateCart();
}

/* INVOICE */
function downloadInvoice(){
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();
    let y=20;
    doc.text("Royal Spice Biriyani House",20,y);
    y+=10;
    for(let item in cart){
        doc.text(`${item} x ${cart[item].quantity}`,20,y);
        y+=8;
    }
    doc.text(`Total ‚Çπ${document.getElementById("total").innerText}`,20,y+5);
    doc.save("Invoice.pdf");
}
</script>

</body>
</html>

